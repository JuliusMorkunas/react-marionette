{"version":3,"file":"index.umd.js","sources":["../src/MarionetteComponent.jsx","../src/ReactBehavior.jsx","../src/ReactView.js"],"sourcesContent":["/**\r\n * Developer: Stepan Burguchev\r\n * Date: 2/5/2017\r\n * Copyright: 2015-2017 ApprovalMax\r\n *       All Rights Reserved\r\n *\r\n * THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF ApprovalMax\r\n *       The copyright notice above does not evidence any\r\n *       actual or intended publication of such source code.\r\n */\r\n\r\nimport Marionette from 'backbone.marionette';\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass MarionetteComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._el = null;\r\n        this._view = null;\r\n        this._hostRegion = null;\r\n        this._regionManager = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._regionManager = new Marionette.View();\r\n        this._hostRegion = this._regionManager.addRegion('hostRegion', {\r\n            el: this._el\r\n        });\r\n        this._rebuildView();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (this.props.view !== nextProps.view) {\r\n            throw new Error(\r\n                '[MarionetteComponent] error: `props.view` cannot be changed after the initial render.'\r\n            );\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.onUpdateOptions) {\r\n            this.props.onUpdateOptions(this._view, prevProps.viewOptions, this.props.viewOptions);\r\n        }\r\n        if (this._view.shouldViewRebuild && this._view.shouldViewRebuild(this.props.viewOptions)) {\r\n            this._rebuildView();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._regionManager.destroy();\r\n    }\r\n\r\n    getRegion() {\r\n        return this._hostRegion;\r\n    }\r\n\r\n    _rebuildView() {\r\n        if (!this.props.view) {\r\n            return;\r\n        }\r\n\r\n        const View = this.props.view;\r\n        this._view = new View(this.props.viewOptions);\r\n        this._hostRegion.show(this._view);\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.className} ref={el => (this._el = el)} />;\r\n    }\r\n}\r\n\r\nMarionetteComponent.propTypes = {\r\n    view: PropTypes.func.isRequired,\r\n    viewOptions: PropTypes.object,\r\n    onUpdateOptions: PropTypes.func,\r\n    className: PropTypes.string\r\n};\r\n\r\nexport default MarionetteComponent;\r\n","/**\r\n * Developer: Stepan Burguchev\r\n * Date: 2/5/2017\r\n * Copyright: 2015-2017 ApprovalMax\r\n *       All Rights Reserved\r\n *\r\n * THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF ApprovalMax\r\n *       The copyright notice above does not evidence any\r\n *       actual or intended publication of such source code.\r\n */\r\n\r\nimport Marionette from 'backbone.marionette';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nexport default Marionette.Behavior.extend({\r\n    initialize(options) {\r\n        if (!options.render) {\r\n            throw new Error('Missing options: render');\r\n        }\r\n    },\r\n\r\n    onRender() {\r\n        this._mountReactComponent();\r\n    },\r\n\r\n    onDestroy() {\r\n        if (this._mounted) {\r\n            ReactDOM.unmountComponentAtNode(this._getContainerEl());\r\n        }\r\n    },\r\n\r\n    _mountReactComponent() {\r\n        ReactDOM.render(\r\n            this.options.render(),\r\n            this._getContainerEl()\r\n        );\r\n        this._mounted = true;\r\n    },\r\n\r\n    _getContainerEl() {\r\n        if (this.options.containerEl) {\r\n            return this.$(this.options.containerEl)[0];\r\n        }\r\n        return this.el;\r\n    }\r\n});\r\n","/**\r\n * Developer: Stepan Burguchev\r\n * Date: 2/5/2017\r\n * Copyright: 2015-2017 ApprovalMax\r\n *       All Rights Reserved\r\n *\r\n * THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF ApprovalMax\r\n *       The copyright notice above does not evidence any\r\n *       actual or intended publication of such source code.\r\n */\r\n\r\nimport Marionette from 'backbone.marionette';\r\nimport ReactBehavior from './ReactBehavior';\r\n\r\nexport default Marionette.View.extend({\r\n    initialize(options) {},\r\n\r\n    template: false,\r\n\r\n    behaviors() {\r\n        return {\r\n            ReactBehavior: {\r\n                behaviorClass: ReactBehavior,\r\n                containerEl: null,\r\n                render: this.options.render,\r\n            }\r\n        };\r\n    }\r\n});\r\n"],"names":["MarionetteComponent","props","_el","_view","_hostRegion","_regionManager","Marionette","View","addRegion","_rebuildView","nextProps","view","Error","prevProps","onUpdateOptions","viewOptions","shouldViewRebuild","destroy","show","className","el","React","Component","propTypes","PropTypes","func","isRequired","object","string","Behavior","extend","options","render","_mountReactComponent","_mounted","unmountComponentAtNode","_getContainerEl","containerEl","$","ReactBehavior"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;AAWA,IAIMA;;;iCACUC,KAAZ,EAAmB;;;6IACTA,KADS;;cAEVC,GAAL,GAAW,IAAX;cACKC,KAAL,GAAa,IAAb;cACKC,WAAL,GAAmB,IAAnB;cACKC,cAAL,GAAsB,IAAtB;;;;;;4CAGgB;iBACXA,cAAL,GAAsB,IAAIC,WAAWC,IAAf,EAAtB;iBACKH,WAAL,GAAmB,KAAKC,cAAL,CAAoBG,SAApB,CAA8B,YAA9B,EAA4C;oBACvD,KAAKN;aADM,CAAnB;iBAGKO,YAAL;;;;kDAGsBC,WAAW;gBAC7B,KAAKT,KAAL,CAAWU,IAAX,KAAoBD,UAAUC,IAAlC,EAAwC;sBAC9B,IAAIC,KAAJ,CACF,uFADE,CAAN;;;;;2CAMWC,WAAW;gBACtB,KAAKZ,KAAL,CAAWa,eAAf,EAAgC;qBACvBb,KAAL,CAAWa,eAAX,CAA2B,KAAKX,KAAhC,EAAuCU,UAAUE,WAAjD,EAA8D,KAAKd,KAAL,CAAWc,WAAzE;;gBAEA,KAAKZ,KAAL,CAAWa,iBAAX,IAAgC,KAAKb,KAAL,CAAWa,iBAAX,CAA6B,KAAKf,KAAL,CAAWc,WAAxC,CAApC,EAA0F;qBACjFN,YAAL;;;;;+CAIe;iBACdJ,cAAL,CAAoBY,OAApB;;;;oCAGQ;mBACD,KAAKb,WAAZ;;;;uCAGW;gBACP,CAAC,KAAKH,KAAL,CAAWU,IAAhB,EAAsB;;;;gBAIhBJ,OAAO,KAAKN,KAAL,CAAWU,IAAxB;iBACKR,KAAL,GAAa,IAAII,IAAJ,CAAS,KAAKN,KAAL,CAAWc,WAApB,CAAb;iBACKX,WAAL,CAAiBc,IAAjB,CAAsB,KAAKf,KAA3B;;;;iCAGK;;;mBACE,6BAAK,WAAW,KAAKF,KAAL,CAAWkB,SAA3B,EAAsC,KAAK;2BAAO,OAAKjB,GAAL,GAAWkB,EAAlB;iBAA3C,GAAP;;;;EArD0BC,MAAMC;;AAyDxCtB,oBAAoBuB,SAApB,GAAgC;UACtBC,UAAUC,IAAV,CAAeC,UADO;iBAEfF,UAAUG,MAFK;qBAGXH,UAAUC,IAHC;eAIjBD,UAAUI;CAJzB;;ACxEA;;;;;;;;;;;AAWA,AAIA,oBAAetB,WAAWuB,QAAX,CAAoBC,MAApB,CAA2B;cAAA,sBAC3BC,OAD2B,EAClB;YACZ,CAACA,QAAQC,MAAb,EAAqB;kBACX,IAAIpB,KAAJ,CAAU,yBAAV,CAAN;;KAH8B;YAAA,sBAO3B;aACFqB,oBAAL;KARkC;aAAA,uBAW1B;YACJ,KAAKC,QAAT,EAAmB;qBACNC,sBAAT,CAAgC,KAAKC,eAAL,EAAhC;;KAb8B;wBAAA,kCAiBf;iBACVJ,MAAT,CACI,KAAKD,OAAL,CAAaC,MAAb,EADJ,EAEI,KAAKI,eAAL,EAFJ;aAIKF,QAAL,GAAgB,IAAhB;KAtBkC;mBAAA,6BAyBpB;YACV,KAAKH,OAAL,CAAaM,WAAjB,EAA8B;mBACnB,KAAKC,CAAL,CAAO,KAAKP,OAAL,CAAaM,WAApB,EAAiC,CAAjC,CAAP;;eAEG,KAAKjB,EAAZ;;CA7BO,CAAf;;ACfA;;;;;;;;;;;AAWA,AAGA,gBAAed,WAAWC,IAAX,CAAgBuB,MAAhB,CAAuB;cAAA,sBACvBC,OADuB,EACd,EADc;;;cAGxB,KAHwB;;aAAA,uBAKtB;eACD;2BACY;+BACIQ,aADJ;6BAEE,IAFF;wBAGH,KAAKR,OAAL,CAAaC;;SAJ7B;;CANO,CAAf;;;;;;;;;;;;;;"}