{"version":3,"file":"index.umd.js","sources":["../src/MarionetteComponent.jsx","../src/ReactBehavior.jsx","../src/ReactView.js"],"sourcesContent":["/**\r\n * Developer: Stepan Burguchev\r\n * Date: 2/5/2017\r\n * Copyright: 2015-2017 ApprovalMax\r\n *       All Rights Reserved\r\n *\r\n * THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF ApprovalMax\r\n *       The copyright notice above does not evidence any\r\n *       actual or intended publication of such source code.\r\n */\r\n\r\nimport Marionette from 'backbone.marionette';\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass MarionetteComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._el = null;\r\n        this._view = null;\r\n        this._hostRegion = null;\r\n        this._regionManager = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._regionManager = new Marionette.RegionManager();\r\n        this._hostRegion = this._regionManager.addRegion('hostRegion', {\r\n            el: this._el\r\n        });\r\n        this._rebuildView(this.props);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps) {\r\n        if (nextProps.onUpdateOptions) {\r\n            nextProps.onUpdateOptions(this._view);\r\n        }\r\n        if (this._view.shouldViewRebuild && this._view.shouldViewRebuild(nextProps.viewOptions)) {\r\n            this._rebuildView(nextProps);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._regionManager.destroy();\r\n    }\r\n\r\n    getRegion() {\r\n        return this._hostRegion;\r\n    }\r\n\r\n    _rebuildView(props) {\r\n        if (!props.view) {\r\n            return;\r\n        }\r\n\r\n        const View = props.view; // tslint:disable-line\r\n        this._view = new View(props.viewOptions);\r\n        this._hostRegion.show(this._view);\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.className} ref={el => (this._el = el)} />;\r\n    }\r\n}\r\n\r\nMarionetteComponent.propTypes = {\r\n    view: PropTypes.func.isRequired,\r\n    viewOptions: PropTypes.object,\r\n    onUpdateOptions: PropTypes.func,\r\n    className: PropTypes.string\r\n};\r\n\r\nexport default MarionetteComponent;\r\n","/**\r\n * Developer: Stepan Burguchev\r\n * Date: 2/5/2017\r\n * Copyright: 2015-2017 ApprovalMax\r\n *       All Rights Reserved\r\n *\r\n * THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF ApprovalMax\r\n *       The copyright notice above does not evidence any\r\n *       actual or intended publication of such source code.\r\n */\r\n\r\nimport Marionette from 'backbone.marionette';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nexport default Marionette.Behavior.extend({\r\n    initialize(options) {\r\n        if (!options.containerEl) {\r\n            throw new Error('Missing options: containerEl');\r\n        }\r\n        if (!options.containerEl) {\r\n            throw new Error('Missing options: render');\r\n        }\r\n    },\r\n\r\n    onShow() {\r\n        ReactDOM.render(\r\n            this.options.render(),\r\n            this.__getContainerEl()\r\n        );\r\n    },\r\n\r\n    onDestroy() {\r\n        ReactDOM.unmountComponentAtNode(this.__getContainerEl());\r\n    },\r\n\r\n    __getContainerEl() {\r\n        if (this.options.containerEl) {\r\n            return this.$(this.options.containerEl)[0];\r\n        }\r\n        return this.el;\r\n    }\r\n});\r\n","/**\r\n * Developer: Stepan Burguchev\r\n * Date: 2/5/2017\r\n * Copyright: 2015-2017 ApprovalMax\r\n *       All Rights Reserved\r\n *\r\n * THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF ApprovalMax\r\n *       The copyright notice above does not evidence any\r\n *       actual or intended publication of such source code.\r\n */\r\n\r\nimport Marionette from 'backbone.marionette';\r\nimport ReactBehavior from './ReactBehavior';\r\n\r\nexport default Marionette.ItemView.extend({\r\n    initialize(options) {},\r\n\r\n    template: false,\r\n\r\n    behaviors() {\r\n        return {\r\n            ReactBehavior: {\r\n                behaviorClass: ReactBehavior,\r\n                containerEl: null,\r\n                render: this.options.render\r\n            }\r\n        };\r\n    }\r\n});\r\n"],"names":["MarionetteComponent","props","_el","_view","_hostRegion","_regionManager","Marionette","RegionManager","addRegion","_rebuildView","nextProps","onUpdateOptions","shouldViewRebuild","viewOptions","destroy","view","View","show","className","el","React","Component","propTypes","PropTypes","func","isRequired","object","string","Behavior","extend","options","containerEl","Error","render","__getContainerEl","unmountComponentAtNode","$","ItemView","ReactBehavior"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;AAWA,IAIMA;;;iCACUC,KAAZ,EAAmB;;;6IACTA,KADS;;cAEVC,GAAL,GAAW,IAAX;cACKC,KAAL,GAAa,IAAb;cACKC,WAAL,GAAmB,IAAnB;cACKC,cAAL,GAAsB,IAAtB;;;;;;4CAGgB;iBACXA,cAAL,GAAsB,IAAIC,WAAWC,aAAf,EAAtB;iBACKH,WAAL,GAAmB,KAAKC,cAAL,CAAoBG,SAApB,CAA8B,YAA9B,EAA4C;oBACvD,KAAKN;aADM,CAAnB;iBAGKO,YAAL,CAAkB,KAAKR,KAAvB;;;;8CAGkBS,WAAW;gBACzBA,UAAUC,eAAd,EAA+B;0BACjBA,eAAV,CAA0B,KAAKR,KAA/B;;gBAEA,KAAKA,KAAL,CAAWS,iBAAX,IAAgC,KAAKT,KAAL,CAAWS,iBAAX,CAA6BF,UAAUG,WAAvC,CAApC,EAAyF;qBAChFJ,YAAL,CAAkBC,SAAlB;;mBAEG,KAAP;;;;+CAGmB;iBACdL,cAAL,CAAoBS,OAApB;;;;oCAGQ;mBACD,KAAKV,WAAZ;;;;qCAGSH,OAAO;gBACZ,CAACA,MAAMc,IAAX,EAAiB;;;;gBAIXC,OAAOf,MAAMc,IAAnB,CALgB;iBAMXZ,KAAL,GAAa,IAAIa,IAAJ,CAASf,MAAMY,WAAf,CAAb;iBACKT,WAAL,CAAiBa,IAAjB,CAAsB,KAAKd,KAA3B;;;;iCAGK;;;mBACE,6BAAK,WAAW,KAAKF,KAAL,CAAWiB,SAA3B,EAAsC,KAAK;2BAAO,OAAKhB,GAAL,GAAWiB,EAAlB;iBAA3C,GAAP;;;;EA9C0BC,MAAMC;;AAkDxCrB,oBAAoBsB,SAApB,GAAgC;UACtBC,UAAUC,IAAV,CAAeC,UADO;iBAEfF,UAAUG,MAFK;qBAGXH,UAAUC,IAHC;eAIjBD,UAAUI;CAJzB;;ACjEA;;;;;;;;;;;AAWA,AAIA,oBAAerB,WAAWsB,QAAX,CAAoBC,MAApB,CAA2B;cAAA,sBAC3BC,OAD2B,EAClB;YACZ,CAACA,QAAQC,WAAb,EAA0B;kBAChB,IAAIC,KAAJ,CAAU,8BAAV,CAAN;;YAEA,CAACF,QAAQC,WAAb,EAA0B;kBAChB,IAAIC,KAAJ,CAAU,yBAAV,CAAN;;KAN8B;UAAA,oBAU7B;iBACIC,MAAT,CACI,KAAKH,OAAL,CAAaG,MAAb,EADJ,EAEI,KAAKC,gBAAL,EAFJ;KAXkC;aAAA,uBAiB1B;iBACCC,sBAAT,CAAgC,KAAKD,gBAAL,EAAhC;KAlBkC;oBAAA,8BAqBnB;YACX,KAAKJ,OAAL,CAAaC,WAAjB,EAA8B;mBACnB,KAAKK,CAAL,CAAO,KAAKN,OAAL,CAAaC,WAApB,EAAiC,CAAjC,CAAP;;eAEG,KAAKZ,EAAZ;;CAzBO,CAAf;;ACfA;;;;;;;;;;;AAWA,AAGA,gBAAeb,WAAW+B,QAAX,CAAoBR,MAApB,CAA2B;cAAA,sBAC3BC,OAD2B,EAClB,EADkB;;;cAG5B,KAH4B;;aAAA,uBAK1B;eACD;2BACY;+BACIQ,aADJ;6BAEE,IAFF;wBAGH,KAAKR,OAAL,CAAaG;;SAJ7B;;CANO,CAAf;;;;;;;;;;;;;;"}